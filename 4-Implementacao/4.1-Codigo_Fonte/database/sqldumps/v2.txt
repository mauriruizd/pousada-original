CREATE TABLE cidades (id INT NOT NULL, id_estado INT DEFAULT NULL, nome VARCHAR(255) NOT NULL, INDEX IDX_79B94AE76A540E (id_estado), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE clientes (id INT AUTO_INCREMENT NOT NULL, id_cidade INT DEFAULT NULL, id_usuario INT DEFAULT NULL, nome VARCHAR(255) NOT NULL, email VARCHAR(255) NOT NULL, telefone VARCHAR(255) NOT NULL, celular VARCHAR(255) NOT NULL, profissao VARCHAR(255) NOT NULL, nacionalidade VARCHAR(255) NOT NULL, data_nascimento DATETIME NOT NULL, dni VARCHAR(255) NOT NULL, cpf VARCHAR(255) NOT NULL, genero CHAR(1) NOT NULL, endereco VARCHAR(255) NOT NULL, observacoes LONGTEXT NOT NULL, INDEX IDX_50FE07D74CAF86B1 (id_cidade), INDEX IDX_50FE07D7FCF8192D (id_usuario), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE estados (id INT AUTO_INCREMENT NOT NULL, id_pais INT DEFAULT NULL, nome VARCHAR(255) NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE paises (id INT NOT NULL, nome VARCHAR(255) NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
ALTER TABLE cidades ADD CONSTRAINT FK_79B94AE76A540E FOREIGN KEY (id_estado) REFERENCES estados (id);
ALTER TABLE clientes ADD CONSTRAINT FK_50FE07D74CAF86B1 FOREIGN KEY (id_cidade) REFERENCES cidades (id);
ALTER TABLE clientes ADD CONSTRAINT FK_50FE07D7FCF8192D FOREIGN KEY (id_usuario) REFERENCES usuarios (id);
ALTER TABLE paises ADD estado_id INT DEFAULT NULL;
ALTER TABLE paises ADD CONSTRAINT FK_DFAD237B9F5A440B FOREIGN KEY (estado_id) REFERENCES estados (id);
CREATE INDEX IDX_DFAD237B9F5A440B ON paises (estado_id);
ALTER TABLE usuarios CHANGE login email VARCHAR(255) NOT NULL;
ALTER TABLE estados ADD id_pais INT DEFAULT NULL;
ALTER TABLE estados ADD CONSTRAINT FK_222B2128F57D32FD FOREIGN KEY (id_pais) REFERENCES paises (id);
CREATE INDEX IDX_222B2128F57D32FD ON estados (id_pais);
ALTER TABLE paises DROP FOREIGN KEY FK_DFAD237B9F5A440B;
DROP INDEX IDX_DFAD237B9F5A440B ON paises;
ALTER TABLE paises DROP estado_id;